---docker-compose.yml
services:
odoo:
image: odoo:16.0
depends_on:
- db
ports:
- "8069:8069"
volumes:
- ./extra-addons:/mnt/extra-addons
- ./odoo.conf:/etc/odoo/odoo.conf
- odoo-data:/var/lib/odoo
environment:
- HOST=db
- USER=odoo
- PASSWORD=odoo
platform: linux/amd64
db:
image: postgres:13
environment:
- POSTGRES_DB=postgres
- POSTGRES_USER=odoo
- POSTGRES_PASSWORD=odoo
volumes:
- odoo-db-data:/var/lib/postgresql/data
platform: linux/amd64
volumes:
odoo-data:
odoo-db-data:
---odoo.conf
[options]
addons_path = /mnt/extra-addons,/usr/lib/python3/dist-packages/odoo/addons
data_dir = /var/lib/odoo
admin_passwd = $pbkdf2-sha512$600000$7l3r3RtjzPl/T.ndW.s9pw$qRk38ix6.beNhYNu7/cDIfvYpQY7JxkwWabb9x9NmePICsxXLqaCoj/f6SwTg8arZFJtLR2Uke8Si72GbP0BZg

---run.py
def wait_for_odoo():
while True:
try:
subprocess.run(["curl", "-f", "http://localhost:8069"], timeout=5)
print("✅ Odoo is ready!")
break
except subprocess.CalledProcessError:
print("⏳ Waiting for Odoo...")
time.sleep(5)

# In main():
run_command("docker-compose up --build -d")
wait_for_odoo()
webbrowser.open("http://localhost:8069")
---extra-addons\membership_profile_search\__init__.py
from . import controllers
from . import models
---extra-addons\membership_profile_search\__manifest__.py
{
'name': 'Membership Profile Search',
'version': '1.0',
'summary': 'Manage members and display public list with search functionality',
'depends': ['base', 'website', 'membership', 'website_partner'],
'data': [
'security/ir.model.access.csv',
'views/membership_profile_search_templates.xml',
'views/membership_profile_search_views.xml',
],
'assets': {
'web.assets_frontend': [
'membership_profile_search/static/img/placeholder.png',
],
},
'installable': True,
'application': True,
}
---extra-addons\membership_profile_search\controllers\main.py
from odoo import http
from odoo.http import request
from werkzeug.exceptions import NotFound

class MembershipProfileSearchController(http.Controller):
@http.route('/membership', type='http', auth='public', website=True)
def list_members(self, **kwargs):
members = request.env['res.partner'].sudo().search([
('membership_state', '!=', 'none'),
('website_published', '=', True),
])

# Đảm bảo tất cả thông tin được tải
for member in members:
if not member.company_name and member.parent_id:
member.company_name = member.parent_id.name

return request.render('membership_profile_search.membership_profile_search_list_template', {
'members': members,
'search': kwargs.get('search', '')
})

@http.route('/partners/<model("res.partner"):partner>', type='http', auth='public', website=True)
def member_detail(self, partner, **kwargs):
values = {
'partner': partner,
'main_object': partner,
}
return request.render("website_partner.partner_page", values)
---extra-addons\membership_profile_search\controllers\__init__.py
from . import main
---extra-addons\membership_profile_search\controllers\__pycache__\main.cpython-39.pyc
[ERROR READING FILE: 'utf-8' codec can't decode byte 0x8e in position 8: invalid start byte]
---extra-addons\membership_profile_search\controllers\__pycache__\__init__.cpython-39.pyc
[ERROR READING FILE: 'utf-8' codec can't decode byte 0xbb in position 9: invalid start byte]
---extra-addons\membership_profile_search\models\membership_profile_search.py
from odoo import fields, models, api

class MembershipProfileSearch(models.Model):
_inherit = 'res.partner'
_description = 'Membership Profile Search'

image_1920 = fields.Image(string='Avatar', max_width=1920, max_height=1920)
company_name = fields.Char(string='Company Name', store=True)
@api.depends('parent_id', 'parent_id.name')
def _compute_company_name(self):
for partner in self:
if partner.parent_id:
partner.company_name = partner.parent_id.name
elif partner.is_company:
partner.company_name = partner.name

industry_id = fields.Many2one('res.partner.industry', string='Industry')
street = fields.Char(string='Street')
city = fields.Char(string='City')
state_id = fields.Many2one('res.country.state', string='State')
country_id = fields.Many2one('res.country', string='Country')
---extra-addons\membership_profile_search\models\__init__.py
from . import membership_profile_search
---extra-addons\membership_profile_search\models\__pycache__\member.cpython-39.pyc
[ERROR READING FILE: 'utf-8' codec can't decode byte 0xe3 in position 16: invalid continuation byte]
---extra-addons\membership_profile_search\models\__pycache__\membership_profile_search.cpython-39.pyc
[ERROR READING FILE: 'utf-8' codec can't decode byte 0xec in position 8: invalid continuation byte]
---extra-addons\membership_profile_search\models\__pycache__\__init__.cpython-39.pyc
[ERROR READING FILE: 'utf-8' codec can't decode byte 0xe2 in position 8: invalid continuation byte]
---extra-addons\membership_profile_search\security\ir.model.access.csv
id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
access_membership_profile_search_public,membership_profile_search.public,model_res_partner,,1,0,0,0
---extra-addons\membership_profile_search\views\membership_profile_search_templates.xml
<?xml version="1.0" encoding="utf-8"?>
<odoo>
<template id="membership_profile_search_list_template" name="Membership Profile Search List">
<t t-call="website.layout">
<div class="container mt-4">
<h1>Danh sách hội viên</h1>
<p style="margin-bottom: 30px;">
Hội viên chính thức được công nhận và lưu giữ hồ sơ điện tử tại Hiệp hội Doanh nghiệp Nhỏ và Vừa TP. Vũng Tàu là những cá nhân hoặc tổ chức đã vượt qua quy trình thẩm định chất lượng nghiêm ngặt của Hiệp hội, đồng thời hoàn thành đầy đủ các nghĩa vụ đóng góp tài chính theo quy định. Tư cách này mang lại cho hội viên những quyền lợi đặc biệt, khẳng định uy tín và sự cam kết trong việc đồng hành cùng sự phát triển bền vững của cộng đồng doanh nghiệp Nhỏ và Vừa TP. Vũng Tàu.
</p>
<br/><br/>
<!-- Search Bar -->
<div class="row mb-4">
<div class="col-12">
<div class="input-group">
<input type="text" class="form-control" placeholder="Tìm kiếm theo tên, công ty, ngành nghề hoặc địa chỉ..." id="memberSearchInput"/>
<div class="input-group-append">
<button class="btn btn-primary" type="button" onclick="searchMembers()">Tìm kiếm</button>
</div>
</div>
</div>
</div>
<br/><br/>
<!-- JavaScript for Client-Side Search -->
<script>
function searchMembers() {
var searchTerm = document.getElementById('memberSearchInput').value.toLowerCase();
var cards = document.querySelectorAll('.card');

cards.forEach(function(card) {
var name = card.querySelector('.card-title strong').textContent.toLowerCase();
var company = card.querySelector('.card-text:nth-child(2)').textContent.toLowerCase();
var industry = card.querySelector('.card-text:nth-child(3)').textContent.toLowerCase();
var address = card.querySelector('.card-text:nth-child(4)').textContent.toLowerCase();

if (name.includes(searchTerm) ||
company.includes(searchTerm) ||
industry.includes(searchTerm) ||
address.includes(searchTerm)) {
card.parentElement.style.display = 'block';
} else {
card.parentElement.style.display = 'none';
}
});
}

// Trigger search on Enter key
document.getElementById('memberSearchInput').addEventListener('keypress', function(e) {
if (e.key === 'Enter') {
searchMembers();
}
});
</script>

<!-- Member List -->
<div class="row">
<t t-foreach="members" t-as="member">
<div class="col-md-4 col-sm-6 mb-4">
<div class="card h-100 shadow-sm">
<a t-att-href="'/partners/%s' % slug(member)" class="text-decoration-none text-dark">
<img t-att-src="member.image_1920 and '/web/image/res.partner/%s/image_1920' % member.id or '/membership_profile_search/static/img/placeholder.png'"
t-att-alt="'Member Avatar: ' + (member.name or '')"
class="card-img-top rounded-circle mx-auto mt-3"
style="width: 120px; height: 120px; object-fit: cover;"/>
<div class="card-body text-center">
<h5 class="card-title">
<strong><t t-esc="member.name"/></strong>
</h5>
<p class="card-text">
<strong>Công ty: </strong>
<t t-if="member.parent_id">
<t t-esc="member.parent_id.name or ''"/>
</t>
<t t-elif="member.company_name">
<t t-esc="member.company_name"/>
</t>
<t t-elif="member.commercial_company_name">
<t t-esc="member.commercial_company_name"/>
</t>
</p>
<p class="card-text">
<strong>Ngành nghề: </strong>
<t t-esc="member.industry_id.name or ''"/>
</p>
<p class="card-text">
<strong>Địa chỉ: </strong>
<t t-esc="', '.join(filter(None, [
member.street or '',
member.city or '',
member.state_id.name or '',
member.country_id.name or ''
])) or ''"/>
</p>
</div>
</a>
</div>
</div>
</t>
</div>

<!-- Styles -->
<style>
.container.mt-4 {
padding-top: 20px;
}
h1 {
text-align: center;
font-size: 2.5rem;
color: #278F84;
margin-bottom: 10px;
}
.input-group {
max-width: 600px;
margin: 0 auto;
}
.form-control {
border-radius: 5px 0 0 5px;
}
.btn-primary {
background-color: #278F84;
border-color: #278F84;
border-radius: 0 5px 5px 0;
}
.btn-primary:hover {
background-color: #278F84;
border-color: #278F84;
}
.row {
margin-top: 20px;
}
.card {
border: none;
border-radius: 10px;
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
background-color: #fff;
transition: transform 0.2s;
}
.card:hover {
transform: translateY(-5px);
}
.card-img-top {
width: 120px;
height: 120px;
object-fit: cover;
border-radius: 50%;
margin-top: 20px;
border: 4px solid #278F84;
}
.card-body {
padding: 15px;
text-align: center;
}
.card-title {
font-size: 1.25rem;
font-weight: bold;
color: #278F84;
}
.card-text {
font-size: 0.9rem;
color: #666;
margin-bottom: 5px;
}
.card-text strong {
color: #278F84;
}
</style>
</div>
</t>
</template>
</odoo>
---extra-addons\membership_profile_search\views\membership_profile_search_views.xml
<?xml version="1.0" encoding="utf-8"?>
<odoo>
<record id="membership_profile_search_tree_view" model="ir.ui.view">
<field name="name">membership_profile_search.tree</field>
<field name="model">res.partner</field>
<field name="arch" type="xml">
<tree>
<field name="name"/>
<field name="email"/>
</tree>
</field>
</record>

<record id="membership_profile_search_form_view" model="ir.ui.view">
<field name="name">membership_profile_search.form</field>
<field name="model">res.partner</field>
<field name="arch" type="xml">
<form>
<sheet>
<group>
<field name="name"/>
<field name="email"/>
<field name="company_name"/>
<field name="industry_id"/>
<field name="street"/>
<field name="city"/>
<field name="state_id"/>
<field name="country_id"/>
<field name="image_1920" widget="image"/>
</group>
</sheet>
</form>
</field>
</record>

<record id="action_membership_profile_search" model="ir.actions.act_window">
<field name="name">Membership Profiles</field>
<field name="res_model">res.partner</field>
<field name="view_mode">tree,form</field>
<field name="view_id" eval="False"/>
<field name="views" eval="[(False, 'tree'), (False, 'form')]"/>
</record>

<menuitem id="menu_membership_profile_search_root" name="Membership Profiles" sequence="10"/>
<menuitem id="menu_membership_profile_search_list" name="Profile List" parent="menu_membership_profile_search_root" action="action_membership_profile_search" sequence="10"/>
</odoo>
---extra-addons\membership_profile_search\__pycache__\__init__.cpython-39.pyc
[ERROR READING FILE: 'utf-8' codec can't decode byte 0xc1 in position 8: invalid start byte]
